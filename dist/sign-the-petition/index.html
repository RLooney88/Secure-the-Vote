<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign the Petition - Secure the Vote Maryland</title>
  <meta name="description" content="Join thousands of Marylanders demanding election integrity. Sign our petition for voter ID, signature verification, and transparent elections.">
  <link rel="icon" type="image/png" href="/images/favicon.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Questrial&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Questrial', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; line-height: 1.6; color: #333; }
    
    .petition-hero {
      background: linear-gradient(135deg, #9B1E37 0%, #7a1829 100%);
      color: white; padding: 70px 20px; text-align: center;
    }
    .petition-hero h1 { font-family: 'Poppins', sans-serif; font-size: 2.6em; margin-bottom: 16px; font-weight: 700; }
    .petition-hero p { font-size: 1.2em; max-width: 700px; margin: 0 auto 24px; opacity: 0.95; }
    .petition-stats {
      background: rgba(255,255,255,0.12); padding: 16px 28px; border-radius: 10px;
      display: inline-block; margin-top: 10px;
    }
    .petition-stats .stat-number { font-size: 2.4em; font-weight: bold; display: block; }
    .petition-stats .stat-label { font-size: 1em; opacity: 0.9; }
    
    .petition-content { max-width: 1100px; margin: 0 auto; padding: 50px 20px; }
    .petition-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 50px; align-items: start; }
    @media (max-width: 900px) { .petition-grid { grid-template-columns: 1fr; gap: 30px; } }
    
    .petition-info h2 { font-family: 'Poppins', sans-serif; color: #9B1E37; font-size: 1.8em; margin-bottom: 16px; }
    .petition-info h3 { font-family: 'Poppins', sans-serif; color: #9B1E37; font-size: 1.3em; margin-top: 28px; margin-bottom: 12px; }
    .petition-info p { margin-bottom: 12px; font-size: 1.05em; }
    .petition-info ul { list-style: none; padding: 0; }
    .petition-info ul li { padding: 10px 0 10px 28px; position: relative; font-size: 1.02em; }
    .petition-info ul li:before { content: "\2713"; position: absolute; left: 0; color: #9B1E37; font-weight: bold; font-size: 1.2em; }
    
    .petition-message {
      background: #f8f9fa; border-left: 4px solid #9B1E37; padding: 20px 24px;
      margin: 24px 0; border-radius: 0 8px 8px 0; font-size: 0.95em; line-height: 1.7;
      max-height: 300px; overflow-y: auto;
    }
    .petition-message h3 { font-family: 'Poppins', sans-serif; color: #9B1E37; margin: 0 0 12px 0; font-size: 1.2em; }
    .petition-message p { margin-bottom: 8px; }
    
    .petition-form-container {
      background: #f8f9fa; padding: 32px; border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08); position: sticky; top: 20px;
    }
    .petition-form-container h2 { font-family: 'Poppins', sans-serif; color: #9B1E37; margin: 0 0 20px 0; font-size: 1.6em; }
    .form-group { margin-bottom: 16px; }
    .form-group label { display: block; margin-bottom: 6px; font-weight: 600; color: #333; font-size: 0.95em; }
    .form-group input, .form-group textarea {
      width: 100%; padding: 10px 12px; border: 2px solid #ddd; border-radius: 5px;
      font-size: 1em; font-family: inherit; transition: border-color 0.3s;
    }
    .form-group input:focus, .form-group textarea:focus { outline: none; border-color: #9B1E37; }
    .form-group textarea { min-height: 80px; resize: vertical; }
    .form-group.checkbox { display: flex; align-items: start; gap: 8px; }
    .form-group.checkbox input[type="checkbox"] { width: auto; margin-top: 4px; }
    .form-group.checkbox label { margin: 0; font-weight: normal; font-size: 0.9em; }
    
    .submit-button {
      background: #9B1E37; color: white; border: none; padding: 14px; font-size: 1.1em;
      font-weight: 600; border-radius: 5px; cursor: pointer; width: 100%;
      font-family: 'Poppins', sans-serif; transition: background 0.3s;
    }
    .submit-button:hover { background: #7a1829; }
    .submit-button:disabled { background: #ccc; cursor: not-allowed; }
    
    .success-message { display:none; background:#d4edda; border:2px solid #c3e6cb; color:#155724; padding:16px; border-radius:5px; margin-top:16px; }
    .error-message { display:none; background:#f8d7da; border:2px solid #f5c6cb; color:#721c24; padding:16px; border-radius:5px; margin-top:16px; }
    
    .share-section { background:#f8f9fa; padding:30px 20px; text-align:center; margin-top:30px; border-radius:10px; }
    .share-section h3 { font-family:'Poppins',sans-serif; color:#9B1E37; margin-bottom:16px; }
    .share-buttons { display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }
    .share-button { display:inline-flex; align-items:center; gap:8px; padding:10px 20px; border-radius:5px; text-decoration:none; color:white; font-weight:600; transition:transform 0.2s; font-size:0.95em; }
    .share-button:hover { transform:translateY(-2px); }
    .share-button.facebook { background:#1877f2; }
    .share-button.twitter { background:#1da1f2; }
    .share-button.email { background:#666; }
  </style>
<style id="stv-hero-banner-css">
/* STV Hero Banner */
.stv-hero-banner {
  background-image: url("/images/political-leaders-at-conference.jpg");
  background-position: top center;
  background-repeat: no-repeat;
  background-size: cover;
  overflow: hidden;
  padding: 3em 0 0 0;
  position: relative;
}
@media(min-width:1025px) {
  .stv-hero-banner { background-attachment: fixed; }
}
@media(max-width:1024px) {
  .stv-hero-banner { padding: 5em 1.5em 5em 1.5em; }
}
.stv-hero-banner > .elementor-background-overlay {
  background-color: transparent;
  background-image: radial-gradient(at top left, #000000CC 0%, #9B1E37 85%);
  opacity: 0.6;
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
}
.stv-hero-banner > .elementor-container {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  position: relative;
  z-index: 1;
}
.stv-hero-banner .stv-banner-col-side { width: 18%; }
.stv-hero-banner .stv-banner-col-center {
  width: 64%;
  display: flex;
  align-items: center;
  justify-content: center;
}
.stv-hero-banner .stv-banner-col-center > .elementor-widget-wrap {
  padding: 6em 0;
  width: 100%;
}
.stv-hero-banner .stv-banner-title {
  text-align: center;
  font-family: "Questrial", Sans-serif;
  font-size: 60px;
  font-weight: 500;
  text-transform: capitalize;
  line-height: 70px;
  color: #FFFFFF;
  margin: 0;
}
@media(max-width:767px) {
  .stv-hero-banner .stv-banner-title { font-size: 45px; line-height: 55px; }
  .stv-hero-banner .stv-banner-col-side { display: none; }
  .stv-hero-banner .stv-banner-col-center { width: 100%; }
}
.stv-hero-banner .stv-banner-divider {
  width: 15%;
  height: 5px;
  background: #FFFFFF;
  margin: 20px auto 0;
  border: none;
}
</style>
</head>
<body>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<div id="site-header"></div>


<section class="elementor-section elementor-top-section stv-hero-banner elementor-section-boxed elementor-section-height-default">
<div class="elementor-background-overlay"></div>
<div class="elementor-container elementor-column-gap-default">
<div class="elementor-column elementor-col-33 elementor-top-column stv-banner-col-side"><div class="elementor-widget-wrap"></div></div>
<div class="elementor-column elementor-col-33 elementor-top-column stv-banner-col-center">
<div class="elementor-widget-wrap elementor-element-populated">
<div class="elementor-element elementor-widget elementor-widget-heading">
<div class="elementor-widget-container">
<h1 class="elementor-heading-title elementor-size-default stv-banner-title">Sign the Petition</h1></div>
</div>
<hr class="stv-banner-divider">
</div>
</div>
<div class="elementor-column elementor-col-33 elementor-top-column stv-banner-col-side"><div class="elementor-widget-wrap"></div></div>
</div>
</section>
<div class="petition-info">
  <h2 id="petition-title">Loading petition...</h2>
  <p class="petition-desc" id="petition-desc"></p>
  <div class="petition-stats-bar">
    <span class="stat-number" id="signature-count">...</span>
    <span class="stat-label" id="stat-label">signatures and counting</span>
  </div>
</div>

<main class="petition-content">
  <div class="petition-grid">
    <div class="petition-info">
      <h2>Why This Petition Matters</h2>
      <p>Maryland's elections must be transparent, secure, and trustworthy. We're calling on our state legislature and election officials to implement common-sense reforms that will restore confidence in our democratic process.</p>
      
      <div id="petition-message-container"></div>
      
      <h3>What We're Fighting For:</h3>
      <ul>
        <li><strong>Voter ID Requirements:</strong> Ensure every voter is who they claim to be</li>
        <li><strong>Signature Verification:</strong> Validate mail-in ballots with proper authentication</li>
        <li><strong>Transparent Vote Counting:</strong> Open the process to public observation</li>
        <li><strong>Regular List Maintenance:</strong> Keep voter rolls accurate and up-to-date</li>
        <li><strong>Paper Ballot Trail:</strong> Maintain verifiable records of every vote</li>
        <li><strong>Board Accountability:</strong> Hold election officials responsible for compliance</li>
      </ul>
      
      <h3>Your Voice Matters</h3>
      <p>Every signature sends a powerful message to our elected officials. Together, we can secure Maryland's elections and protect the integrity of our democracy.</p>
      
      <div class="share-section">
        <h3>Share This Petition</h3>
        <div class="share-buttons">
          <a href="https://www.facebook.com/sharer/sharer.php?u=https://securethevotemd.com/sign-the-petition/" target="_blank" class="share-button facebook"><i class="fab fa-facebook-f"></i> Facebook</a>
          <a href="https://twitter.com/intent/tweet?text=Join%20me%20in%20demanding%20election%20integrity%20in%20Maryland!&url=https://securethevotemd.com/sign-the-petition/" target="_blank" class="share-button twitter"><i class="fab fa-x-twitter"></i> Share</a>
          <a href="mailto:?subject=Sign%20the%20Election%20Integrity%20Petition&body=I%20just%20signed%20a%20petition%20for%20election%20integrity%20in%20Maryland.%20Join%20me:%20https://securethevotemd.com/sign-the-petition/" class="share-button email"><i class="fas fa-envelope"></i> Email</a>
        </div>
      </div>
    </div>
    
    <div class="petition-form-container">
      <h2>Add Your Name</h2>
      <form id="petition-form">
        <div class="form-group">
          <label for="firstName">First Name *</label>
          <input type="text" id="firstName" name="firstName" required>
        </div>
        <div class="form-group">
          <label for="lastName">Last Name *</label>
          <input type="text" id="lastName" name="lastName" required>
        </div>
        <div class="form-group">
          <label for="email">Email Address *</label>
          <input type="email" id="email" name="email" required>
        </div>
        <div class="form-group">
          <label for="zipCode">ZIP Code *</label>
          <input type="text" id="zipCode" name="zipCode" pattern="[0-9]{5}" required>
        </div>
        <div class="form-group">
          <label for="phone">Phone Number (optional)</label>
          <input type="tel" id="phone" name="phone">
        </div>
        <div class="form-group">
          <label for="comments">Comments (optional)</label>
          <textarea id="comments" name="comments"></textarea>
        </div>
        <div class="form-group checkbox">
          <input type="checkbox" id="updates" name="updates" checked>
          <label for="updates">Keep me updated on election integrity efforts in Maryland</label>
        </div>
        <button type="submit" class="submit-button">Sign the Petition</button>
        <div class="success-message" id="success-message"><strong>Thank you!</strong> Your signature has been added. Share this petition to amplify your voice!</div>
        <div class="error-message" id="error-message"><strong>Oops!</strong> Something went wrong. Please try again.</div>
      </form>
    </div>
  </div>
</main>

<script>
(async function() {
  var petitionName = 'secure-your-vote-2026';
  try {
    var res = await fetch('/api/petition/view?name=' + encodeURIComponent(petitionName));
    if (!res.ok) throw new Error('API ' + res.status);
    var data = await res.json();
    var p = data.petition;
    
    document.getElementById('signature-count').textContent = (data.signature_count || 0).toLocaleString();
    if (p.title) document.getElementById('petition-title').textContent = p.title;
    if (p.description) document.getElementById('petition-desc').textContent = p.description;
    
    if (p.goal) {
      var pct = Math.min(100, Math.round((data.signature_count / p.goal) * 100));
      document.getElementById('stat-label').textContent = 'of ' + p.goal.toLocaleString() + ' goal (' + pct + '%)';
      var bar = document.createElement('div');
      bar.style.cssText = 'background:rgba(255,255,255,0.2);border-radius:10px;height:8px;margin-top:12px;width:200px;display:inline-block';
      bar.innerHTML = '<div style="background:#F6BF58;border-radius:10px;height:100%;width:'+pct+'%;transition:width 0.5s"></div>';
      document.querySelector('.petition-stats').appendChild(bar);
    }
    
    if (p.message) {
      var container = document.getElementById('petition-message-container');
      container.innerHTML = '<div class="petition-message"><h3>Our Message</h3>' + p.message + '</div>';
    }
  } catch(e) {
    console.error('Petition load error:', e);
    document.getElementById('signature-count').textContent = '\u2014';
    document.getElementById('petition-desc').textContent = 'Join thousands of Marylanders demanding election integrity.';
  }
})();

document.getElementById('petition-form').addEventListener('submit', async function(e) {
  e.preventDefault();
  var btn = this.querySelector('.submit-button');
  var ok = document.getElementById('success-message');
  var err = document.getElementById('error-message');
  btn.disabled = true; btn.textContent = 'Submitting...';
  ok.style.display = 'none'; err.style.display = 'none';
  try {
    var res = await fetch('/api/petition/submit', {
      method: 'POST', headers: {'Content-Type':'application/json'},
      body: JSON.stringify({
        petition_name: 'secure-your-vote-2026',
        full_name: document.getElementById('firstName').value + ' ' + document.getElementById('lastName').value,
        email: document.getElementById('email').value,
        zip_code: document.getElementById('zipCode').value,
        phone: document.getElementById('phone').value || null,
        comments: document.getElementById('comments').value || null,
        optin: document.getElementById('updates').checked
      })
    });
    if (res.ok) {
      var data = await res.json();
      ok.style.display = 'block';
      if (data.signature_count) document.getElementById('signature-count').textContent = data.signature_count.toLocaleString();
      this.reset();
    } else { err.style.display = 'block'; }
  } catch(ex) { err.style.display = 'block'; }
  btn.disabled = false; btn.textContent = 'Sign the Petition';
});
</script>


<!-- TEMPLATE INJECTION START -->
<div id="site-footer"></div>
<script>
// Use Shadow DOM to isolate templates from Elementor CSS
async function loadTemplate(hostId, htmlUrl, cssUrl, jsUrl) {
  const host = document.getElementById(hostId);
  const shadow = host.attachShadow({ mode: 'open' });
  
  const [htmlRes, cssRes] = await Promise.all([
    fetch(htmlUrl).then(r => r.text()),
    fetch(cssUrl).then(r => r.text())
  ]);
  
  shadow.innerHTML = '<style>' + cssRes + '</style>' + htmlRes;
  
  if (jsUrl) {
    const jsRes = await fetch(jsUrl).then(r => r.text());
    const script = document.createElement('script');
    script.textContent = jsRes;
    shadow.appendChild(script);
  }
}

// Load Font Awesome inside shadow DOMs
const faLink = '<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">';

fetch('https://site-builder-ai-production.up.railway.app/sites/securethevotemd/templates')
  .then(r => r.json())
  .then(templateData => {
    const headerHtml = templateData.header;
    const footerHtml = templateData.footer;
    const css = templateData.css;
  const varFix = `<style>
    :host { display: block; width: 100%; }
    :host * { box-sizing: border-box; }
    :root, :host {
      --color-maroon: #8B1A1A;
      --color-maroon-dark: #5d1111;
      --color-red: #C41E3A;
      --color-gold: #F6BF58;
      --color-gold-dark: #d9a03f;
      --color-white: #ffffff;
      --color-black: #000000;
      --color-gray-light: #f5f5f5;
      --color-gray-medium: #666666;
      --color-gray-dark: #333333;
      --font-primary: 'Poppins', sans-serif;
      --font-secondary: 'Questrial', sans-serif;
      --nav-height: 80px;
      --top-bar-height: 40px;
      --banner-height: 48px;
    }
  </style>`;
  
  // Header shadow DOM
  const headerHost = document.getElementById('site-header');
  const headerShadow = headerHost.attachShadow({ mode: 'open' });
  headerShadow.innerHTML = faLink + varFix + '<style>' + css + '</style>' + headerHtml;
  // Hamburger menu handler
  var hbtn = headerShadow.querySelector('.hamburger-menu');
  var hnav = headerShadow.querySelector('.primary-nav');
  if (hbtn && hnav) {
    hbtn.addEventListener('click', function(e) {
      e.preventDefault();
      var open = hbtn.getAttribute('aria-expanded') === 'true';
      hbtn.setAttribute('aria-expanded', !open);
      hnav.classList.toggle('mobile-open');
      document.body.style.overflow = !open ? 'hidden' : '';
    });
    hnav.querySelectorAll('a[href]:not([href="#"])').forEach(function(a) {
      a.addEventListener('click', function() {
        hbtn.setAttribute('aria-expanded', 'false');
        hnav.classList.remove('mobile-open');
        document.body.style.overflow = '';
      });
    });
    hnav.querySelectorAll('.has-dropdown > a[href="#"]').forEach(function(a) {
      a.addEventListener('click', function(e) {
        e.preventDefault();
        var dd = this.parentElement.querySelector('.dropdown');
        if (dd) dd.style.display = dd.style.display === 'block' ? 'none' : 'block';
      });
    });
  }

  // Footer shadow DOM
  const footerHost = document.getElementById('site-footer');
  const footerShadow = footerHost.attachShadow({ mode: 'open' });
  footerShadow.innerHTML = faLink + varFix + '<style>' + css + '</style>' + footerHtml;
  
  // Scroll-up animation: IntersectionObserver watches the footer host from the main document
  // (Shadow DOM elements aren't directly observable from outside, but the host element is)
  const logoBox = footerShadow.querySelector('.footer-logo-box');
  if (logoBox) {
    const obs = new IntersectionObserver((entries) => {
      entries.forEach(e => { if (e.isIntersecting) { logoBox.classList.add('visible'); obs.unobserve(e.target); }});
    }, { root: null, threshold: 0.15 });
    // Observe the host element (visible in main DOM) as a proxy for the shadow content
    obs.observe(footerHost);
  }

  var ls = document.getElementById('template-loading'); if (ls) ls.remove();
});
</script>
<!-- TEMPLATE INJECTION END -->
<script src="/js/mobile-menu.js"></script>
</body>
</html>