<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign the Petition - Secure The Vote Maryland</title>
  <meta http-equiv="refresh" content="0;url=/sign-the-petition/">
  <link rel="canonical" href="/sign-the-petition/">
  <script>window.location.replace('/sign-the-petition/');</script>
</head>
<body>
<!-- TEMPLATE INJECTION START -->
<link rel="icon" type="image/png" href="/images/2024/04/LOGOsecurethevote_yellowMD.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<style>
  .ekit-template-content-header { display: none !important; }
  .ekit-template-content-footer { display: none !important; }
  #site-header, #site-footer { width: 100%; }
</style>
<div id="site-header"></div>
<!-- TEMPLATE INJECTION END -->

  <p>Redirecting to <a href="/sign-the-petition/">Sign the Petition</a>...</p>

<!-- TEMPLATE INJECTION START -->
<div id="site-footer"></div>
<script>
// Use Shadow DOM to isolate templates from Elementor CSS
async function loadTemplate(hostId, htmlUrl, cssUrl, jsUrl) {
  const host = document.getElementById(hostId);
  const shadow = host.attachShadow({ mode: 'open' });
  
  const [htmlRes, cssRes] = await Promise.all([
    fetch(htmlUrl).then(r => r.text()),
    fetch(cssUrl).then(r => r.text())
  ]);
  
  shadow.innerHTML = '<style>' + cssRes + '</style>' + htmlRes;
  
  if (jsUrl) {
    const jsRes = await fetch(jsUrl).then(r => r.text());
    const script = document.createElement('script');
    script.textContent = jsRes;
    shadow.appendChild(script);
  }
}

// Load Font Awesome inside shadow DOMs
const faLink = '<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">';

Promise.all([
  fetch('/templates/header.html').then(r => r.text()),
  fetch('/templates/footer.html').then(r => r.text()),
  fetch('/templates/template.css').then(r => r.text()),
  fetch('/templates/mobile-menu.js').then(r => r.text()).catch(() => '')
]).then(([headerHtml, footerHtml, css, menuJs]) => {
  const varFix = `<style>
    :host { display: block; width: 100%; }
    :host * { box-sizing: border-box; }
    :root, :host {
      --color-maroon: #8B1A1A;
      --color-maroon-dark: #5d1111;
      --color-red: #C41E3A;
      --color-gold: #F6BF58;
      --color-gold-dark: #d9a03f;
      --color-white: #ffffff;
      --color-black: #000000;
      --color-gray-light: #f5f5f5;
      --color-gray-medium: #666666;
      --color-gray-dark: #333333;
      --font-primary: 'Poppins', sans-serif;
      --font-secondary: 'Questrial', sans-serif;
      --nav-height: 80px;
      --top-bar-height: 40px;
      --banner-height: 48px;
    }
  </style>`;
  
  // Header shadow DOM
  const headerHost = document.getElementById('site-header');
  const headerShadow = headerHost.attachShadow({ mode: 'open' });
  headerShadow.innerHTML = faLink + varFix + '<style>' + css + '</style>' + headerHtml;
  // Hamburger menu handler
  var hbtn = headerShadow.querySelector('.hamburger-menu');
  var hnav = headerShadow.querySelector('.primary-nav');
  if (hbtn && hnav) {
    hbtn.addEventListener('click', function(e) {
      e.preventDefault();
      var open = hbtn.getAttribute('aria-expanded') === 'true';
      hbtn.setAttribute('aria-expanded', !open);
      hnav.classList.toggle('mobile-open');
      document.body.style.overflow = !open ? 'hidden' : '';
    });
    hnav.querySelectorAll('a[href]:not([href="#"])').forEach(function(a) {
      a.addEventListener('click', function() {
        hbtn.setAttribute('aria-expanded', 'false');
        hnav.classList.remove('mobile-open');
        document.body.style.overflow = '';
      });
    });
    hnav.querySelectorAll('.has-dropdown > a[href="#"]').forEach(function(a) {
      a.addEventListener('click', function(e) {
        e.preventDefault();
        var dd = this.parentElement.querySelector('.dropdown');
        if (dd) dd.style.display = dd.style.display === 'block' ? 'none' : 'block';
      });
    });
  }
  if (menuJs) {
    eval(menuJs);
    if (typeof initMobileMenu === 'function') initMobileMenu(headerShadow);
  }

  // Footer shadow DOM
  const footerHost = document.getElementById('site-footer');
  const footerShadow = footerHost.attachShadow({ mode: 'open' });
  footerShadow.innerHTML = faLink + varFix + '<style>' + css + '</style>' + footerHtml;
  
  // Scroll-up animation: IntersectionObserver watches the footer host from the main document
  // (Shadow DOM elements aren't directly observable from outside, but the host element is)
  const logoBox = footerShadow.querySelector('.footer-logo-box');
  if (logoBox) {
    const obs = new IntersectionObserver((entries) => {
      entries.forEach(e => { if (e.isIntersecting) { logoBox.classList.add('visible'); obs.unobserve(e.target); }});
    }, { root: null, threshold: 0.15 });
    // Observe the host element (visible in main DOM) as a proxy for the shadow content
    obs.observe(footerHost);
  }
});
</script>
<!-- TEMPLATE INJECTION END -->
<script src="/js/mobile-menu.js"></script>
</body>
</html>
